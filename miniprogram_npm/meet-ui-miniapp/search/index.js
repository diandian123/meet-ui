Component({options:{addGlobalClass:!0},properties:{type:{type:String,value:"normal"},value:{type:String,optionalTypes:[null],value:""},placeholder:{type:String,value:"请输入关键字"},focus:{type:Boolean,value:!1},btnText:{type:String,value:"搜索"},maxLength:{type:Number,value:-1},autoSearch:{type:null,value:null},throttle:{type:Number,value:500}},observers:{type(t){"simple"===t&&this.setData({labelText:"搜索"})},autoSearch(t){"function"==typeof t&&this.setData({btnText:"取消"})}},data:{actived:!1,showClear:!1},lastSearch:Date.now(),methods:{handleActive(){this.setData({focus:!0,actived:!0})},handleFocus(){this.setData({actived:!0}),0<this.data.value?.length&&this.setData({showClear:!0})},handleBlur(){"trigger"===this.data.type&&this.data.value||this.setData({actived:!1,showClear:!1})},handleClear(){this.setData({value:null,focus:!1,actived:!1,showClear:!1},()=>{this.triggerEvent("clear",{value:""})}),"function"==typeof this.data.autoSearch&&this.autoSearch()},handleInput(t){t=t.detail.value;0<t.length?this.setData({value:t,showClear:!0}):this.setData({value:t,showClear:!1}),this.triggerEvent("input",{value:t}),"function"==typeof this.data.autoSearch&&this.autoSearch()},handleConfirm(t){t=t.detail.value;this.triggerEvent("confirm",{value:t})},autoSearch(){Date.now()-this.lastSearch<this.data.throttle||(this.lastSearch=Date.now(),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.data.autoSearch(this.data.value)},this.data.throttle))},handlSearch(){"function"==typeof this.data.autoSearch?this.handleCancel():this.triggerEvent("search",{value:this.data.value})},handleCancel(){this.setData({value:"",actived:!1,showClear:!1}),this.timerId&&clearTimeout(this.timerId),"function"==typeof this.data.autoSearch&&this.autoSearch()}}});