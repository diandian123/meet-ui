Component({options:{addGlobalClass:!0,multipleSlots:!0,styleIsolation:"shared"},properties:{items:{type:Array,value:[]},current:{type:Array,optionalTypes:[String,Number],value:[]},type:{type:String,value:"radio"},visible:{type:Boolean,value:!1},top:{type:Number,value:0},changeTitle:{type:Boolean,value:!0},bottomDistance:{type:Number,value:200},scene:{type:String,value:"page"},topClosable:{type:Boolean,value:!0}},data:{columns:[],position:"top",popupTarget:!1,maskVisible:!0,selectCurrent:[]},observers:{items(t){this.setData({columns:t})},current(s){const{type:t,items:e}=this.data;"checkbox"===t&&(this.checked=e.filter((t,e)=>{if(0<=s.indexOf(e))return t})),this.setData({selectCurrent:s})},selectCurrent(s){const t=this.data["items"];var e=t.map((t,e)=>(0<=s.indexOf(e)?t.checked=!0:t.checked=!1,t));this.setData({columns:e})},top(t){"top"===this.data.position?this.setData({menuStyle:`top:${t}px`}):this.setData({menuStyle:`bottom:${t}px;top:0`})}},lifetimes:{ready(){this.getWindowHeight()}},methods:{handleRadio(t){var{items:e,changeTitle:s,targetClick:i=!1}=this.data,t=t.target.dataset["index"];const a=[];a.push(t),s&&this.triggerEvent("setTitle",e[t].label),this.setData({selectCurrent:a}),this.closePopup(),this.triggerEvent("click",{item:{value:e[t].value,label:e[t].label},columns:a,targetClick:i})},handleCheckbox(t){var e=this.data["items"];const{value:s,checked:i}=t.detail,a=(this.checked=i.map(t=>t),[]);for(let t=0;t<=e.length-1;t++)0<=s.indexOf(e[t].value)&&a.push(t);this.setData({selectCurrent:a})},reset(){this.checked=[],this.setData({selectCurrent:[]}),this.closePopup()},confrim(){var{selectCurrent:t,targetClick:e=!1}=this.data;this.closePopup(),this.checked=this.checked.map(t=>({value:t.value,label:t.label})),this.triggerEvent("click",{item:this.checked,columns:t,targetClick:e})},close(){this.triggerEvent("close"),this.closePopup()},closePopup(t=300){this.triggerEvent("resetActive"),this.setData({popupTarget:!1}),setTimeout(()=>{this.setData({visible:!1})},t)},setDropdown(t){t&&(t=t["id"],0<t.length&&this.getTargetInfo(t),this.setData({targetClick:!0})),this.setData({popupTarget:!0,visible:!0})},getWindowHeight(){var t=wx.getSystemInfoSync().windowHeight;"tab"===this.data.scene?this.createSelectorQuery().select("#mask").boundingClientRect(t=>{this.maskTop=t.top,this.setData({maskVisible:!1})}).exec():this.setData({maskVisible:!1}),this.windowHeight=t},stopEvent(){},getTargetInfo(t){if(0<t.length){t="#"+t;const e=wx.createSelectorQuery();e.select(t).boundingClientRect(t=>{this.setPosition(t)}).exec()}},setPosition(t){var e=this.data["bottomDistance"],s=t["bottom"];let i=t.top,a="";a=this.windowHeight-s<e?(i=this.windowHeight-i,"bottom"):(i=s-(this.maskTop||0),"top"),this.setData({top:i,position:a})},maskClose(){this.data.topClosable&&this.close()}}});