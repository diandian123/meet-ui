Component({options:{addGlobalClass:!0,multipleSlots:!0,styleIsolation:"shared"},properties:{type:{type:String,value:"preset"},options:{type:Object,value:{}},hasLimit:{type:Boolean,value:!0},hasMore:{type:Boolean,value:!1},hasShare:{type:Boolean,value:!1},shareType:{type:String,value:"card"},hasReply:{type:Boolean,value:!0},hasRelation:{type:Boolean,value:!1}},observers:{options(e){e.commentTime&&(e=this.formatBeforeTime(e.commentTime),this.setData({commentTime:e}))}},data:{commentTime:"",expandState:!1,overflow:!1},lifetimes:{ready(){if(0<this.data.hasLimit){const e=this.createSelectorQuery();let t;e.select(".mt-comment__content__wp").boundingClientRect(e=>{t=e.height}),e.select(".mt-comment__content__bd").boundingClientRect(e=>{e.height>t?this.setData({overflow:!0}):this.setData({overflow:!1})}),e.exec()}}},methods:{handleUser(){this.triggerEvent("user",{userId:this.data.options.userInfo.userId})},handleMore(){var e=this.data.options.isMe||!1;this.triggerEvent("more",{isMe:e,commentId:this.data.options.commentId})},handleShare(){"card"!==this.data.shareType&&this.triggerEvent("share",{})},handleApprove(){var{commentId:e,hasApprove:t}=this.data.options;this.triggerEvent("approve",{commentId:e,flag:t})},handleDelete(){this.triggerEvent("delete",{commentId:this.data.options.commentId})},handleReply(){this.triggerEvent("reply",{commentId:this.data.options.commentId,replyCount:this.data.options.replyCount,toUserInfo:this.data.options.userInfo})},handleExpand(){this.setData({expandState:!this.data.expandState})},formatBeforeTime(e){e*=1e3;let t="";var a=(new Date).getTime()-e;if(a<0)return t="刚刚";var o=Math.floor(a/6e4),s=Math.floor(a/36e5),n=Math.floor(a/864e5),i=Math.floor(a/6048e5);if(1<=i&&i<=3)t=parseInt(i)+"周前";else if(1<=n&&n<=6)t=parseInt(n)+"天前";else if(1<=s&&s<=23)t=parseInt(s)+"小时前";else if(1<=o&&o<=60)t=parseInt(o)+"分钟前";else if(0<=a&&a<=6e4)t="刚刚";else{const r=new Date;r.setTime(e);i=r.getFullYear(),n=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,s=r.getDate()<10?"0"+r.getDate():r.getDate();t=i+`-${n}-`+s}return t}}});