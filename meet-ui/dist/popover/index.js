Component({options:{addGlobalClass:!0,multipleSlots:!0},properties:{placement:{type:String,value:"autoTB"},items:{type:Array,value:[]},textColor:{type:String,value:"#fff"},bgColor:{type:String,value:"#333333"},maskColor:{type:String,value:"transparent"}},data:{visible:!1,triangleStyle:"",labelStyle:"",trianglePosition:"bottom",triangleColor:"",comPlacement:""},observers:{placement(t){this.setData({comPlacement:t})},comPlacement(t){var e=this.data["bgColor"];-1<t.indexOf("top")?this.setData({trianglePosition:"top",triangleColor:"border-top-color:"+e}):-1<t.indexOf("left")?this.setData({trianglePosition:"left",triangleColor:"border-left-color:"+e}):-1<t.indexOf("right")?this.setData({trianglePosition:"right",triangleColor:"border-right-color:"+e}):this.setData({trianglePosition:"bottom",triangleColor:"border-bottom-color:"+e})},bgColor(t){var e=this.data["trianglePosition"];this.setData({triangleColor:`border-${e}-color:`+t})}},lifetimes:{attached(){this.windowHeight=wx.getSystemInfoSync().windowHeight,this.windowWidth=wx.getSystemInfoSync().windowWidth}},methods:{onClick(t,e){const i=this.data["placement"];var o=e||"#targetId";const l=(0<e?.length?wx:this).createSelectorQuery();l.select(o).boundingClientRect(),l.in(this).select(".mt-popover__label").boundingClientRect(),l.in(this).select(".mt-popover__triangle").boundingClientRect(),l.exec(t=>{"autoTB"===i?this.autoTBSetPosition(t):"autoLR"===i?this.autoLRSetPosition(t):this.setPosition(t)})},setPosition(t){var{left:e,bottom:i,top:o,right:l,width:a}=t[0],s=t[1].width,r=t[1].height,n=t[2].width,p=t[2].height,h=this.data["comPlacement"];let g=a<40?a/2+n/2+"px":a/2+"px";switch(h){case"top":return void this.setData({triangleStyle:`left:${e+a/2-n/2}px;top:${o-p}px`,labelStyle:`left:${e+a/2}px;top:${+o-r-p}px;transform: translateX(-50%);`,visible:!0});case"topRight":return void this.setData({triangleStyle:`left:${e+a/2-n/2}px;top:${o-p}px`,labelStyle:`left:${e+a/2-s}px;top:${o-r-p}px;transform: translateX(${g});`,visible:!0});case"topLeft":return void this.setData({triangleStyle:`left:${e+a/2-n/2}px;top:${o-p}px`,labelStyle:`left:${e+a/2}px;top:${o-r-p}px;transform: translateX(-${g});`,visible:!0});case"right":return void this.setData({triangleStyle:`left:${l}px;top:${o+(t[0].height-p)/2}px;`,labelStyle:`left:${l+n}px;top:${o+t[0].height/2-r/2}px;`,visible:!0});case"rightBottom":return void this.setData({triangleStyle:`left:${l}px;top:${o+(t[0].height-p)/2}px;`,labelStyle:`left:${l+n}px;top:${o-r/2+32}px;`,visible:!0});case"rightTop":return void this.setData({triangleStyle:`left:${l}px;top:${o+(t[0].height-p)/2}px;`,labelStyle:`left:${l+n}px;top:${o-r/2-8}px;`,visible:!0});case"bottom":return void this.setData({triangleStyle:`left:${e+a/2-n/2}px;top:${i}px`,labelStyle:`left:${e+a/2}px;top:${i+p}px;transform: translateX(-50%);`,visible:!0});case"bottomLeft":return void this.setData({triangleStyle:`left:${e+a/2-n/2}px;top:${i}px`,labelStyle:`left:${e+a/2}px;top:${i+p}px;transform: translateX(-${g});`,visible:!0});case"bottomRight":return void this.setData({triangleStyle:`left:${e+a/2-n/2}px;top:${i}px`,labelStyle:`left:${e+a/2-s}px; top:${i+p}px;transform: translateX(${g});`,visible:!0});case"left":return void this.setData({triangleStyle:`left:${e-n}px;top:${o+(t[0].height-p)/2}px;`,labelStyle:`left:${e-s-n}px;top:${o+t[0].height/2-r/2}px;`,visible:!0});case"leftTop":return void this.setData({triangleStyle:`left:${e-n}px;top:${o+(t[0].height-p)/2}px;`,labelStyle:`left:${e-s-n}px;top:${o-r/2-8}px;`,visible:!0});case"leftBottom":return void this.setData({triangleStyle:`left:${e-n}px;top:${o+(t[0].height-p)/2}px;`,labelStyle:`left:${e-s-n}px;top:${o-r/2+32}px;`,visible:!0});default:return}},autoTBSetPosition(t){var{left:e,bottom:i}=t[0],o=t[1]["width"];let l="";l=this.windowHeight-i<150?this.windowWidth-e+t[0].width/2>o?(e+t[0].width/2)/2>o?"top":"topLeft":"topRight":this.windowWidth-e+t[0].width/2>o?(e+t[0].width/2)/2>o?"bottom":"bottomLeft":"bottomRight",this.setData({comPlacement:l},()=>{this.setPosition(t)})},autoLRSetPosition(t){var e=t[0]["right"];let i="";i=40<this.windowWidth-e?"right":"left",this.setData({comPlacement:i},()=>{this.setPosition(t)})},clickPopover(t){this.setData({visible:!1}),this.triggerEvent("click",{item:t.target.dataset.value})},closeMask(){this.setData({visible:!1})},stopEvent(){},setPopover(t){var e;t&&(e=t["id"],0<e.length&&this.onClick(t,"#"+e))}}});